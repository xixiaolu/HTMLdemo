<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./index.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
        }

        #container {
            position: relative;
        }

        .box {
            width: 200px;
            height: 80px;
            text-align: center;
            line-height: 80px;
            font-size: 20px;
            border-radius: 10px;
            border: 2px solid black;
        }

        .boxes {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .highlight {
            outline: 4px dashed var(--color-orangey);
            width: 196px;
            height: 76px;
            line-height: 76px;
        }

        code {
            color: white;
            font-size: 1.2em;
        }

        p {
            width: 600px;
            margin-top: 8px;
        }

        #dropArea {
            width: 60vw;
            height: 30vh;
            border: dashed 2px var(--color-surface-white);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <h1>Draggable: Drop on target only</h1>
    <p>The boxes below can only be dragged and dropped on Drop Area. If boxes are dropped and do not overlap the
        dropArea entirely they will return to starting position. When boxes are eligible to be dropped in Drop Area
        their border will be highlighted.</p>
    <div class="boxes">
        <div id="container">
            <div id="box1" class="box gradient-green">box1</div>
            <div id="box2" class="box gradient-blue">box2</div>
            <div id="box3" class="box gradient-purple">box3</div>
        </div>

        <div id="dropArea">Drop Area</div>
    </div>
</body>
<script>
    // See https://www.greensock.com/draggable/ for more details.

const droppables = document.querySelectorAll(".box");
const dropArea = document.getElementById("dropArea");
const overlapThreshold = "99%";

// Utility to add/remove class
function addClass(el, className) {
  el.classList.add(className);
}

function removeClass(el, className) {
  el.classList.remove(className);
}

function hasClass(el, className) {
  return el.classList.contains(className);
}

Draggable.create(droppables, {
  bounds: window,
  onDrag: function () {
    if (this.hitTest(dropArea, overlapThreshold)) {
      addClass(this.target, "highlight");
    } else {
      removeClass(this.target, "highlight");
    }
  },
  onDragEnd: function () {
    if (!hasClass(this.target, "highlight")) {
      gsap.to(this.target, {
        duration: 0.2,
        x: 0,
        y: 0
      });
    }
  }
});

</script>
</html>